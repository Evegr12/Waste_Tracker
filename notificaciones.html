<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="notificaciones.css">
    <title>Document</title>
</head>
<body>
    <header>
        <div class="logo">
            <a href="inicioRestaurante.html"><img src="logoWT.png" alt="Waste Tracker"></a>
            <h1>Waste Tracker</h1>
        </div>
        <nav>
            <a href="notificaciones.html"><img src="notificaciones.png" alt="Notificaciones" href="notificaciones.html"></a>
            <a href="historial.html"><img src="historial-icon.png" alt="Historial"></a>
            <a href="perfilRestaurante.html"><img src="perfil-icon.png" alt="Perfil"></a>
        </nav>
    </header>

    <div class="notifications">
        <h2>Notificaciones</h2>
        <div class="notification">
            <p class="message">Recolección finalizada con éxito!</p>
            <div class="datetime">
                <span class="date">20 / may / 2024</span>
                <span class="time">15:40</span>
            </div>
        </div>
        <div class="notification">
            <p class="message">El conductor está cerca</p>
            <div class="datetime">
                <span class="date">20 / may / 2024</span>
                <span class="time">15:22</span>
            </div>
        </div>
        <div class="notification">
            <p class="message">¿Ya separaste tus residuos?</p>
            <div class="datetime">
                <span class="date">20 / may / 2024</span>
                <span class="time">14:00</span>
            </div>
        </div>

        <!--bloque script directo -->
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                fetch('/notificaciones')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error en la solicitud: ' + response.statusText);
                    }
                    return response.json(); // <-- Asegúrate de que la respuesta es JSON
                })
                .then(data => {
                    const notificationContainer = document.querySelector('.notifications');
                    data.forEach(notificacion => {
                        const notificationItem = document.createElement('div');
                        notificationItem.classList.add('notification-item');
                        notificationItem.innerHTML = `<p>${notificacion.texto}</p>`;
                        notificationContainer.appendChild(notificationItem);
                    });
                })
                .catch(error => console.error('Error fetching notificaciones:', error));
            });

        </script>
    </div>

    <footer>
        <nav class="footer-nav">
            <a href="inicioRestaurante.html"><img src="home-icon.png" alt="Inicio"></a>
            <a href="solicitudRecoleccion.html"><img src="bote-icon.png" alt="Bote"></a>
            <a href="mapa.html"><img src="map-icon.png" alt="Mapa"></a>
            <a href="calificaciones.html"><img src="calif-icon.png" alt="Calificar"></a>
        </nav>
    </footer>

</body>
</html>